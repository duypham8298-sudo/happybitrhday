*{ box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pacifico', cursive; }

body{
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    background: linear-gradient(135deg, #d4f4dd, #ffccd5);
    height:100vh;/* Sử dụng dvh (dynamic viewport height) thay vì vh */
    width: 100vw;
    overflow:hidden;
    position: fixed; /* Ngăn tình trạng cuộn (bounce) trên Safari */
    display: flex; /* Bật Flexbox */
    justify-content: center; /* Căn giữa theo chiều ngang */
    align-items: center; /* Căn giữa theo chiều dọc */
    min-height: 100vh; /* Đảm bảo body chiếm toàn bộ chiều cao màn hình */
    margin: 0; /* Xóa margin mặc định của body */
}
.container{
    margin: 0 auto;
    width: fit-content;
}
@media (orientation: landscape) {
    #lockScreen {
        max-width: 90vw; /* Chiếm tối đa 90% chiều rộng màn hình */
        max-height: 85vh; /* Giới hạn chiều cao để không bị thanh Safari che */
        padding: 15px 30px;
        display: flex;
        align-items: center;
    }

    .lock-container {
        flex-direction: row; /* Ép buộc nằm ngang */
        gap: 40px; /* Tạo khoảng cách rộng giữa ảnh và phím */
        width: 100%;
    }

    #lockScreen img {
        width: auto; 
        height: 60vh; /* Ảnh co dãn theo chiều dọc màn hình */
        max-height: 250px; /* Giới hạn để không quá lớn */
        object-fit: cover;
    }
}
#lockScreen{
    width: fit-content;
    text-align:center;  
    background:rgba(255,255,255,0.7);
    padding:25px;
    border-radius:20px;
    box-shadow:0 6px 30px rgba(0,0,0,0.1);
}

.lock-container{ /*Khung Khóa -Nhập Mật Khẩu*/
    display:flex; 
    justify-content:center; 
    align-items:center; 
    gap: 20px; /* Tăng khoảng cách giữa ảnh và bàn phím */
}

#lockScreen img{ 
    object-fit:cover; 
    width: 300px;
    height: 380px;
    border-radius: 25px; /* Bo góc mạnh hơn cho giống style Gen Z */
    box-shadow: 10px 10px 0px #ffccd5; /* Hiệu ứng bóng đổ lệch màu tạo điểm nhấn */
}

.right-box{ 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
}

#lockScreen h2{ 
    color:#d63384;
    margin-bottom:10px; 
    text-align:center; 
}

#pwd{
    width:200px;
    padding:10px;
    border:none;
    border-radius:10px;
    text-align:center;
    font-size:18px;
    background:#fff;
    margin-bottom:10px;
    box-shadow:inset 0 2px 4px rgba(0,0,0,0.1)
}
.keypad{
    margin-top:10px;
    display:grid;
    grid-template-columns:repeat(3,60px);
    gap:10px;
    justify-content:center;
}
.key{
    padding:10px;
    border:none;
    border-radius:10px;
    background:#ff8fab;
    color:white;
    font-size:18px;
    cursor:pointer;
}

.key:hover{ 
    background:#ff5d8f; 
}

.key.clear{ 
    background:#f8bbd0;
    color:#333; 
}

#msg{ 
    margin-top:8px;
    color:#b30059; 
    min-height:18px; 
}

#cardScene { /*Khung lá thư  */
    display:none;
    width:400px;
    height:300px;
    background: linear-gradient(135deg, #f2e8d4, #e6d7bd); /* giấy xám nâu nhạt */
    border-radius:20px;
    box-shadow:0 8px 30px rgba(0,0,0,0.15);
    padding:20px;
    text-align:center;
    opacity: 0;
    transition: opacity 0.8s ease-in-out;
}

#cardScene video{
    width:85%; 
    border-radius:15px; 
    object-fit:cover; 
    margin-bottom:10px; 
    box-shadow:0 4px 20px rgba(0,0,0,0.15);
}

#cardScene h2 {
    color: #d81b60;
    margin-bottom:10px;
    animation: rainbowText 2s linear infinite;
    font-size: 28px;
    font-weight: 600;
    text-shadow: 0 0 5px #fff;
}

@keyframes rainbowText {
    0% { color: #ff0000; }
    10% { color: #ff7f00; }
    20% { color: #ffff00; }
    30% { color: #00ff00; }
    40% { color: #0000ff; }
    50% { color: #4b0082; }
    60% { color: #9400d3; }
    70% { color: #ff1493; }
    80% { color: #ff4500; }
    90% { color: #00ced1; }
    100% { color: #ff0000; }
}

#cardScene p{
    width:80%;
    margin:0 auto 15px;
    color:#333;
    font-size:16px;
    min-height:24px;
    white-space:pre-wrap;
    font-family:'Poppins', sans-serif;
}

#openGift{
    background: #ff3c78;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 15px;
    font-size: 20px;
    cursor: pointer;
    animation: float 1.5s infinite;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    box-shadow: 0 8px 15px rgba(0,0,0,0.3);
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

#openGift:hover { background: #ff1c5f; }
#openGift:active {
    transform: translateY(4px) scale(0.95);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    background: #e60050;
}

@keyframes bounce {
    0%,100%{ transform: translateY(0); }
    50%{ transform: translateY(-10px); }
}


.flyImg{
    position:fixed;
    left:-200px;
    object-fit:cover;
    border-radius:20px;
    box-shadow:0 6px 20px rgba(0,0,0,0.25);
    animation-timing-function: linear;
    z-index:50;
    pointer-events:none;
}
@keyframes moveLeftToRight{
    from{transform:translateX(-200px);opacity:2;}
    to{transform:translateX(120vw);opacity:0.5;}
}


.heart{
    position: fixed;
    bottom: -10px;
    font-size: 20px;
    animation: flyUp 6s linear forwards;
    opacity: 0.8;
    z-index: 5;
    pointer-events: none;
}
@keyframes flyUp{
    0% { transform: translateY(0) scale(1); opacity:1; }
    100% { transform: translateY(-110vh) scale(1.8); opacity:0; }
}

#giftEffect {
    display: none;
    position: fixed;
    /* Sử dụng kích thước linh hoạt theo chiều rộng màn hình (vw) để tránh bị tràn */
    width: 90vw; 
    max-width: 500px; /* Giữ giới hạn tối đa 500px cho màn hình lớn */
    aspect-ratio: 1/1; /* Đảm bảo khung luôn hình vuông */
    
    top: 50dvh; /* Căn giữa theo chiều cao động của Safari */
    left: 50dvw;
    transform: translate(-50%, -50%);
    z-index: 999;
    
    /* Chống chạm nhầm vào hiệu ứng khi đang hiển thị */
    pointer-events: none; 
}
#giftEffect img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: contain; /* Đảm bảo hình ảnh hiển thị đầy đủ, không bị mất góc */
    pointer-events: none;
    /* Khử răng cưa cho hình ảnh trên màn hình Retina của iPhone */
    -webkit-backface-visibility: hidden;
}
@keyframes flyUpGift { 0%{transform:translateY(0);opacity:1;}100%{transform:translateY(-200px);opacity:0;} }
@keyframes flyDownGift { 0%{transform:translateY(0);opacity:1;}100%{transform:translateY(200px);opacity:0;} }

#rotateWarning {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    color: white;
    z-index: 99999;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    font-size: 18px;
    line-height: 1.4;
    word-break: break-word;
    overflow: auto;
}